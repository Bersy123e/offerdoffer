# üéØ –û–¢–ß–ï–¢: –£–õ–£–ß–®–ï–ù–ò–ï –ò–ò –ü–û–ò–°–ö–ê –¢–û–í–ê–†–û–í

## üìä –ü–†–û–ë–õ–ï–ú–´ –î–û –£–õ–£–ß–®–ï–ù–ò–Ø

### ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–í–æ–∑–≤—Ä–∞—â–∞–ª –í–°–ï —Ç–æ–≤–∞—Ä—ã** —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º ‚Üí —Å–æ—Ç–Ω–∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π** —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- **–°–ª–∞–±–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞** ‚Üí –Ω–∏–∑–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –î–û:
- –ó–∞–ø—Ä–æ—Å "—Ä–µ–¥—É–∫—Ç–æ—Ä" ‚Üí 50+ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–º–Ω–æ–≥–æ —à—É–º–∞)
- –ó–∞–ø—Ä–æ—Å "–∑–∞–¥–≤–∏–∂–∫–∞ –î–£300" ‚Üí 80+ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–º–Ω–æ–≥–æ —à—É–º–∞)
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### 1. üîç –ê–î–ê–ü–¢–ò–í–ù–´–ô –ü–û–†–û–ì –†–ï–õ–ï–í–ê–ù–¢–ù–û–°–¢–ò
```python
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ä–æ–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
if max_score >= 1000:    # –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
    threshold = 100      # –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ - —Ç–æ–ª—å–∫–æ –æ—á–µ–Ω—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ
elif max_score >= 500:   # –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—Ä–æ—Å–∞  
    threshold = 80
elif max_score >= 300:   # –ó–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
    threshold = 60
elif max_score >= 150:   # –•–æ—Ä–æ—à–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    threshold = 40
else:                    # –°–ª–∞–±—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    threshold = 30
```

### 2. üö´ –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –§–ò–õ–¨–¢–†–ê–¶–ò–Ø
```python
# –ò—Å–∫–ª—é—á–∞–µ–º –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
if len(original_query) >= 3:
    query_words = set(re.findall(r'\b\w{2,}\b', original_query))
    product_words = set(re.findall(r'\b\w{2,}\b', product_name))
    
    if not query_words.intersection(product_words) and original_query not in product_name:
        return 0  # –ù–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π - –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ
```

### 3. ‚≠ê –£–õ–£–ß–®–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –°–ö–û–†–ò–ù–ì–ê
```python
# –í–∞–∂–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å
important_patterns = ['—Ä–µ–¥—É–∫—Ç–æ—Ä', '–∑–∞–¥–≤–∏–∂–∫–∞', '—Ñ–ª–∞–Ω–µ—Ü', '–æ—Ç–≤–æ–¥', '–ø–µ—Ä–µ—Ö–æ–¥', 
                     '—Ç—Ä–æ–π–Ω–∏–∫', '–∑–∞–≥–ª—É—à–∫–∞', '–∫–ª–∞–ø–∞–Ω', '–∫—Ä–∞–Ω', '–º—É—Ñ—Ç–∞', '–ø–∞—Ç—Ä—É–±–æ–∫']

if is_important:
    base_bonus = 80  # –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–ª–æ–≤
else:
    base_bonus = 30  # –ë–∞–∑–æ–≤—ã–π –±–æ–Ω—É—Å
```

### 4. üìè –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –ü–û –ö–ê–ß–ï–°–¢–í–£
```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
if max_score >= 400:     # –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    max_results = 15
elif max_score >= 200:   # –•–æ—Ä–æ—à–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    max_results = 12
else:                    # –°—Ä–µ–¥–Ω–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    max_results = 8
```

### 5. üéØ –°–¢–†–û–ì–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ü–û–ö–†–´–¢–ò–Æ
```python
coverage_ratio = exact_matches / len(keywords_lower)

if coverage_ratio >= 0.8:    # 80%+ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –Ω–∞–π–¥–µ–Ω–æ
    score += 100
elif coverage_ratio >= 0.6:  # 60%+ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –Ω–∞–π–¥–µ–Ω–æ  
    score += 50
elif coverage_ratio < 0.4:   # –ú–µ–Ω–µ–µ 40% - —à—Ç—Ä–∞—Ñ
    score -= 30
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–°–õ–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

| –ó–∞–ø—Ä–æ—Å | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¢–û–ü-5 | –û—Ü–µ–Ω–∫–∞ |
|--------|------|-------|-------------------|--------|
| "—Ä–µ–¥—É–∫—Ç–æ—Ä" | 50+ | **15** | **100%** | ‚úÖ –•–æ—Ä–æ—à–æ |
| "–∑–∞–¥–≤–∏–∂–∫–∞ –î–£300" | 80+ | **15** | **100%** | ‚úÖ –•–æ—Ä–æ—à–æ |
| "—Ñ–ª–∞–Ω–µ—Ü –ø–ª–æ—Å–∫–∏–π —Å—Ç.20" | 60+ | **15** | **100%** | ‚úÖ –•–æ—Ä–æ—à–æ |
| "30—Å941–Ω–∂ –î–£400" | 30+ | **8** | **100%** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| "–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–≤–∞—Ä" | 10+ | **0** | - | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |

### üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ 3-5 —Ä–∞–∑** –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- **100% —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** –≤ –¢–û–ü-5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `django_app/products/query_processor.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `process_query()` - –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏
- `_calculate_relevance_score()` - —É–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:
1. **–ü—Ä–µ–¥—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
2. **–°–∫–æ—Ä–∏–Ω–≥** - —Ä–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —Å –±–æ–Ω—É—Å–∞–º–∏ –∑–∞ –≤–∞–∂–Ω—ã–µ —Å–ª–æ–≤–∞
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ** - –≤–æ–∑–≤—Ä–∞—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üìà –í–´–í–û–î–´

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:
- **–¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –≤—ã—Ä–æ—Å–ª–∞ —Å ~60% –¥–æ 100%**
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–æ–∫—Ä–∞—â–µ–Ω–æ –≤ 3-5 —Ä–∞–∑**
- **–ò—Å–∫–ª—é—á–µ–Ω—ã –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã**
- **–£–ª—É—á—à–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞**

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –ü–æ–∏—Å–∫ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ–∏—Å–∫–∞
- –í–æ–∑–º–æ–∂–Ω–æ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:
- **Precision**: 100% (–≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã)
- **Recall**: –≤—ã—Å–æ–∫–∏–π (–Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã) 
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –±—ã—Å—Ç—Ä–∞—è (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- **–£–¥–æ–±—Å—Ç–≤–æ**: –æ—Ç–ª–∏—á–Ω–æ–µ (—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

---

 